### 
&ensp;&ensp;&ensp;&ensp;聊微前端之前，先聊下什么是微服务（MicroService）。维基百科上对微服务的定义：

> 一种软件开发技术- 面向服务的体系结构（SOA）架构样式的一种变体，它提倡将单一应用程序划分成一组小的服务，服务之间互相协调、互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务间采用轻量级的通信机制互相沟通（通常是基于HTTP的RESTful API）。每个服务都围绕着具体业务进行构建，并且能够独立地部署到生产环境、类生产环境等。另外，应尽量避免统一的、集中式的服务管理机制，对具体的一个服务而言，应根据上下文，选择合适的语言、工具对其进行构建。

&ensp;&ensp;&ensp;&ensp; 不难看出，微服务是一种软件开发技术，其核心是将单一的应用程序拆分成多个小的子服务，子服务可单独部署和维护，降低维护成本，拓宽技术障碍，提升开发效率。随着前端开发技术的不断更新和用户需求的日益增加，前端工程的体量也在增加，这对前端开发者来说，维护重而复杂的项目难度也越来越高。那有什么好的解决方案呢？

 &ensp;&ensp;&ensp;&ensp; 早期的iframe满足了根据业务模块化应用，子应用互连等，但与之而来的问题也较多。近年来用户对web网站的体感要求也越来越高，iframe已经满足不了用户的高体验视觉。随着微服务技术的日益成熟，前端技术也取其精华去其糟粕，微前端也随之孕育而生。那到底什么是微前端呢？和iframe相比有哪些优势呢？有哪些新的技术手段呢？

##### 一.什么是微前端?

&ensp;&ensp;&ensp;&ensp;微前端是一种类似于微服务的架构，是一种把单一应用拆分成多个更小、更简单的能够独立开发、测试、部署的子应用。其有一个**基座应用**（主应用），来管理各个**子应用**的加载和卸载。而对用户呈现的还是一个完整的应用。

其核心思想：

- **独立开发/部署** 各个业务模块、各团队之间仓库独立，单独部署，互不依赖。
- **独立运行时** 微应用之间运行时互不依赖，有独立的状态管理。
- **技术栈无关** 主应用不限制接入应用的技术栈，子应用可自主选择技术栈。

<img :src="$withBase('/imgs/微前端-01.png')"/>

##### 二.微前端有哪些实现方式？

目前社区可用的几种方案：

1. 基于[single-spa](https://single-spa.js.org/)的[qiankun](https://qiankun.umijs.org/zh/)
2. 基于[WebComponent](https://developer.mozilla.org/zh-CN/docs/Web/Web_Components)的[micro-app](https://micro-zoe.github.io/micro-app/)
3. Webpack5实现的[Module Federation](https://webpack.docschina.org/concepts/module-federation/)

*当然有人会说iframe也算一种方案，确实没错。但笔者人为iframe只是**HTML 内联框架元素**，其支持引入上下文而已。*

##### 三.微前端相比iframe有哪些优劣？

- iframe优劣

  作为前端开发，我们对 `iframe` 已经非常熟悉了，它也具有显著的优点：

  1. 非常简单，可直接引入，绑定属性。
  2. 完美隔离，JS、CSS 都是独立的运行环境。
  
  当然，缺点也非常突出：
  
  1. 无法保持路由状态，刷新后路由状态就丢失
  2. 完全的隔离导致与子应用的交互变得极其困难
  3. `iframe` 中的弹窗无法突破其本身
  4. 整个应用全量资源加载，加载太慢。
  
- 微前端优劣

  微前端基本上可以解决iframe的很多缺点，其优势也比较明显：

  1.**HTML Entry 接入方式**和iframe一样简单

  2.JS沙箱和CSS样式隔离，互不受影响

  3.可远程加载，支持预加载和按需加载

  4.公共资源加载优化等。

  

  





